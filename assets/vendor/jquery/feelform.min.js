/**************************************************************************
 * FeelForm - jQuery plugin for advanced client-side form validation (http://getinsite.net/feelform.html)
 * For sale on codecanyon.net
 * @version: 1.0.2 (4.09.2015)
 * @requires jQuery v1.6+
 * @author Artem Zhorov
 * @copyright Artem Zhorov Â©2015
**************************************************************************/
!function($){"use strict";var FFValidatorClass=function(e,t){var r=$.extend({},$.fn.feelform.defaults,t);r.regexp=$.extend({},$.fn.feelform.defaults.regexp,t.regexp),r.errorMessages=$.extend({},$.fn.feelform.defaults.errorMessages,t.errorMessages),this.formId=r.formId,this.notificationType=r.notificationType,this.gravity=r.gravity,this.alignment=r.alignment,this.errorClass=r.errorClass,this.borderProperty=r.borderProperty,this.scrollToError=r.scrollToError,this.scrollTime=r.scrollTime,this.scrollEasing=r.scrollEasing,this.scrollOffset=r.scrollOffset,this.validateOnLoad=r.validateOnLoad,this.validateOnTheFly=r.validateOnTheFly,this.validateStepByStep=r.validateStepByStep,this.validateHidden=r.validateHidden,this.preventDefaultSubmit=r.preventDefaultSubmit,this.clearAfterSubmit=r.clearAfterSubmit,this.ajaxHandler=r.ajaxHandler,this.showPreloader=r.showPreloader,this.onSubmit=r.onSubmit,this.onInputSuccess=r.onInputSuccess,this.onInputError=r.onInputError,this.regexp=r.regexp,this.errorMessages=r.errorMessages,this.currentForm=$(e),this.isFormValid=!0,this.init()};FFValidatorClass.prototype={validators:{required:function(e){return e.length>0},check:function(e){return e},email:function(e){return this.regexp.email.test(e)},number:function(e){return $.isNumeric(e)},phone:function(e){return this.regexp.phone.test(e)},date:function(e){return this.regexp.date.test(e)},text:function(e){return this.regexp.text.test(e)},maxLength:function(e,t){return e.length<=t},minLength:function(e,t){return e.length>=t},max:function(e,t){return parseInt(e,10)<=t},min:function(e,t){return parseInt(e,10)>=t},url:function(e){return this.regexp.url.test(e)},equalTo:function(e,t){return this.currentForm.find('input[name="'+t+'"]').val()===e},file:function(e,t){var r=t.split("|");return r.indexOf(e)>=0},antibot:function(e,t){return e==t},ajax:function(e,t,r){var a=this,n=r;return""!=e&&""!=a.ajaxHandler&&(a.showPreloader&&r.css("background",'#fff url("img/preloader.gif") 2% no-repeat'),$.ajax({type:"post",url:a.ajaxHandler,data:e,cache:!1,success:function(e){if(a.showPreloader&&n.css("background-image",""),"ok"==e)a.clearElement(n),a.showResult(n,!0),n.data("isvalid",!0),a.checkFormValid()&&(a.isFormValid=!0,a.submitForm());else if(a.notifications.indexOf("message")>=0){var t=n.data("messages"),r=a.errorMessages.ajax||a.errorMessages._default||function(){return"Incorrect value"};t.push(r(e)),void 0!=n.data("message")&&(n.data("message").remove(),n.data("message",null)),a.showResult(n,!1,t)}}})),!1}},init:function(){var e=this;e.inputs=e.currentForm.find('input:not(input[type="hidden"], input[type="submit"]), textarea, select'),e.notifications=e.notificationType.split(",");for(var t=0;t<e.notifications.length;t++)e.notifications[t]=e.notifications[t].trim();e.setValidators(),e.currentForm.on("submit",function(t){e.preSubmitForm(),(0==e.isFormValid||1==e.preventDefaultSubmit)&&t.preventDefault()}),1==e.validateOnLoad&&e.validate();for(var t=0;t<e.notifications.length;t++)e.notifications[t]=e.notifications[t].trim();e.notifications.indexOf("message")>=0&&0==$(".ff-box").length&&$("body").append('<div class="ff-box"></div>'),e.notifications.indexOf("message")>=0&&$(window).resize(function(){e.onResize()})},onResize:function(){var e=this;e.inputs.length>0&&$.each(e.inputs,function(){void 0!=$(this).data("message")&&$(this).data("message").is(":visible")&&e.setMessagePos($(this),$(this).data("message"))})},setValidators:function(){var e,t,r=this;$.each(r.inputs,function(){var a=$(this);t=[];var n;n="undefined"==typeof a.attr("class")?[]:a.attr("class").split(" "),$.each(n,function(n,i){if(e="",i.indexOf("-")&&(e=i.split("-")[1],i=i.split("-")[0]),i in r.validators&&t.push({val:i,arg:e}),"antibot"==i){var s=Math.floor(100*Math.random())+1,o=Math.floor(100*Math.random())+1;a.data("summand1",s),a.data("summand2",o),a.attr("placeholder",a.attr("placeholder")+s+" + "+o)}}),a.data("validatorFunctions",t),r.notifications.indexOf("border")>=0&&("checkbox"==a.attr("type")?a.data("border",a.parent().css("border")):a.data("border",a.css("border"))),1==r.validateOnTheFly&&a.on("keyup change blur",function(){var e=$(this);r.clearElement(e),r.validateEl(e)})})},clearElement:function(e){var t=this;t.notifications.indexOf("border")>=0&&("checkbox"==e.attr("type")?e.parent().css("border",e.data("border")):e.css("border",e.data("border"))),t.notifications.indexOf("class")>=0&&e.removeClass(t.errorClass),void 0!=e.data("message")&&(e.data("message").remove(),e.data("message",null))},validate:function(){var e=this;e.isFormValid=!0;var t=$();e.inputs.each(function(){e.clearElement($(this))}),e.inputs.each(function(){var r=$(this),a=e.validateEl(r);return r.data("isvalid",a),0==t.length&&0==a&&(t=r),1==e.validateStepByStep&&0==a?!1:void 0}),1==e.scrollToError&&t.length>0&&$("html, body").stop(!0,!1).animate({scrollTop:t.offset().top+e.scrollOffset},e.scrollTime,e.scrollEasing)},validateEl:function(el){var fn=el.data("validatorFunctions"),self=this,_func,elValid=!0,messages=[];return(1==self.validateHidden||el.is(":visible"))&&($.each(fn,function(i,val){_func=eval("self.validators."+val.val);var elValue;if("checkbox"==el.attr("type"))elValue=el.prop("checked")?!0:!1;else if("file"==el.attr("type")){var fr=/(?:\.([^.]+))?$/;elValue=fr.exec(el.val())[1]||""}else elValue=el.val();if("antibot"==val.val&&(val.arg=(el.data("summand1")||0)+(el.data("summand2")||0)),"ajax"==val.val)elValue=el.attr("name")+"="+el.val(),_func.call(self,elValue,val.arg,el),elValid=!1;else if(_func.call(self,elValue,val.arg)!==!0&&(elValid=!1,self.notifications.indexOf("message")>=0)){var _msg=self.errorMessages[val.val]||self.errorMessages._default||function(){return"Incorrect value"};messages.push(_msg(val.arg))}}),self.showResult(el,elValid,messages)),elValid},showResult:function(e,t,r){var a=this;0==t?(a.notifications.indexOf("border")>=0&&("checkbox"==e.attr("type")?e.parent().css("border",a.borderProperty):e.css("border",a.borderProperty)),a.notifications.indexOf("class")>=0&&e.addClass(a.errorClass),a.notifications.indexOf("message")>=0&&(e.data("messages",r),a.toggleMessage(e,r)),a.notifications.indexOf("errorIcon")>=0&&e.css("background",'#fff url("img/invalid.png") 98% no-repeat'),a.onInputError(e),a.isFormValid=!1):(a.notifications.indexOf("okIcon")>=0&&e.css("background",'#fff url("img/valid.png") 98% no-repeat'),a.onInputSuccess(e))},toggleMessage:function(e,t){var r=this;if(t.length>0){var a=t.join(", "),n=$('<div class="ff-message'+(null!=r.formId?"-"+r.formId:"")+'">'+a+"</div>");e.data("message",n),r.setMessagePos(e,n),$(".ff-box").append(n)}},setMessagePos:function(e,t){var r,a,n;"top"==this.gravity?(r=e.offset().left,a=e.offset().top-15,n=e.outerWidth()):"right"==this.gravity?(r=e.offset().left+e.width(),a=e.offset().top,n=e.outerWidth()):"bottom"==this.gravity&&(r=e.offset().left,a=e.offset().top+e.outerHeight(),n=e.outerWidth()),t.css({position:"absolute",left:r,top:a,width:n,"font-size":"10px",color:"#ff0000",padding:"0px 5px","text-align":this.alignment})},preSubmitForm:function(){this.validate(),this.submitForm()},submitForm:function(){1==this.isFormValid&&(this.onSubmit(this.currentForm),1==this.clearAfterSubmit&&(this.currentForm.find('input:not(input[type="submit"]), textarea').val(""),this.currentForm.find("select").prop("selectedIndex",0),this.currentForm.find('input[type="checkbox"]').prop("checked",!1)))},checkFormValid:function(){var e=!0;return this.inputs.each(function(){0==$(this).data("isvalid")&&(e=!1)}),e}},$.fn.feelform=function(e){return e=e||{},this.each(function(){var t=$(this);if(t.data("feelform"))return t.data("feelform");var r=new FFValidatorClass(this,e);t.data("feelform",r)})},$.fn.feelform.defaults={formId:null,notificationType:"border",gravity:"top",alignment:"left",errorClass:"error",borderProperty:"#FF0000 1px solid",scrollToError:!1,scrollTime:500,scrollEasing:"linear",scrollOffset:-20,validateOnLoad:!1,validateOnTheFly:!1,validateStepByStep:!1,validateHidden:!0,preventDefaultSubmit:!1,clearAfterSubmit:!1,ajaxHandler:"",showPreloader:!0,onSubmit:function(){},onInputSuccess:function(){},onInputError:function(){},regexp:{email:new RegExp(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/),text:new RegExp(/^[a-zA-Z\u00C0-\u00ff\-]+$/),url:new RegExp(/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),phone:new RegExp(/^[\d\s\-\(\)\_\+]+$/),date:new RegExp(/^(0[1-9]|1\d|2\d|3[01])\.(0[1-9]|1[0-2])\.(19|20)\d{2}$/)},errorMessages:{_default:function(){return"Incorrect value"},required:function(){return"Required field"},check:function(){return"You must turn the checkbox on"},maxLength:function(e){return"Maximum "+e+" characters"},minLength:function(e){return"At least "+e+" characters"},email:function(){return"Incorrect email format"},number:function(){return"Digits only"},phone:function(){return"Incorrect phone format"},date:function(){return"Invalid date"},text:function(){return"Letters only"},max:function(e){return"Maximum value is "+e},min:function(e){return"Minimal value is "+e},url:function(){return"Incorrect url format"},equalTo:function(){return"Values do not match"},file:function(){return"Invalid file type"},antibot:function(){return"Bot detected"},ajax:function(e){return e||"Incorrect value"}}}}($);