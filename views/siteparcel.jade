extend layoutsite

block head
  link(rel="stylesheet", href="css/easy-autocomplete.min.css")
  link(rel="stylesheet", href="css/easy-autocomplete.themes.min.css")

block content
  // content
  section.section
    h1 Tuber parcels delivery
    ul.breadcrumbs
      li You are here
      li
        i.fa.fa-angle-double-right
        a(href='/') Home
      li
        i.fa.fa-angle-double-right
        span About my parcel
    .container.bordered
      form.form.js-validate(action='/make/parcel', method='POST')
        .form-block
          .left
            i.icons-profile
            a(href='/profile') GO IN TO MY PROFILE
          .right
            h3 From 
            input#address(type='checkbox', name='fromPersonProfile')
            label(for='address') Choose my profile address
            br
            span or 
            a.more.js-toggle_address1(href='#')
              | FILL ADDRESS FORM 
              i +
            .hidden_address1
              input(type='text', placeholder='First name, for ex.: “George”', name='fromPerson.firstName')
              input(type='text', placeholder='Last name, for ex.: “Bohorquez”', name='fromPerson.lastName')
              input(type='text', placeholder='Adress (street), for ex.: “Way to the ocean”', name='fromPerson.address1')
              input(type='text', placeholder='Adress (number), for ex.: “777”', name='fromPerson.address2')
              input#fromZip(type='text', placeholder='Zip Code, for ex.: “456-78”', name='fromPerson.zip')
              input#fromCity(type='text', placeholder='City, for ex.: “San Francisco”', name='fromPerson.city')
              input#fromCountry(type='text', placeholder='Country, for ex.: “United States”', name='fromPerson.country')
              input(type='text', placeholder='Mobile phone, for ex.: “001 999 4611 8937”', name='fromPerson.phone')
              input(type='text', placeholder='E-mail, for ex.: “George@delti.com”', name='fromPersons.email')
            h3 To 
            input#address1(type='checkbox', name='toPersonProfile')
            label(for='address1') Choose my profile address
            br
            span or 
            a.more.js-toggle_address2(href='#')
              | FILL ADDRESS FORM 
              i +
            .hidden_address2
              input(type='text', placeholder='First name, for ex.: “George”', name='toPerson.firstName')
              input(type='text', placeholder='Last name, for ex.: “Bohorquez”', name='toPerson.lastName')
              input(type='text', placeholder='Adress (street), for ex.: “Way to the ocean”', name='toPerson.address1')
              input(type='text', placeholder='Adress (number), for ex.: “777”', name='toPerson.address2')
              input#toZip(type='text', placeholder='Zip Code, for ex.: “456-78”', name='toPerson.zip')
              input#toCity(type='text', placeholder='City, for ex.: “San Francisco”', name='toPerson.city')
              input#toCountry(type='text', placeholder='Country, for ex.: “United States”', name='toPerson.country')
              input(type='text', placeholder='Mobile phone, for ex.: “001 999 4611 8937”', name='toPerson.phone')
              input(type='text', placeholder='E-mail, for ex.: “George@delti.com”', name='toPerson.email')
            input#packetshop(type='checkbox', name='usePacketshop')
            label.packetshop(for='packetshop') To reduce costs, I am willing to drop the package in a Packetshop close to me.
        .form-block
          .left
            i.icons-parcel
          .right
            h3(align='left') ABOUT MY PARCEL
            ul.form-sizes
              li
                span.up
                  i.fa.fa-chevron-up
                input.numbers(type='text', placeholder='0', name='weight', value='1')
                em kg
                span.down
                  i.fa.fa-chevron-down
                strong Weight
              li
                span.up
                  i.fa.fa-chevron-up
                input.numbers(type='text', placeholder='0', name='length', value='20')
                em cm
                span.down
                  i.fa.fa-chevron-down
                strong Length
              li
                span.up
                  i.fa.fa-chevron-up
                input.numbers(type='text', placeholder='0', name='width', value='5')
                em cm
                span.down
                  i.fa.fa-chevron-down
                strong Width
              li
                span.up
                  i.fa.fa-chevron-up
                input.numbers(type='text', placeholder='0', name='depth', value='5')
                em cm
                span.down
                  i.fa.fa-chevron-down
                strong Depth
            //input#declare(type='checkbox', name='userAgreementContent')
            //label.declare(for='declare')
              | I officially declare that non of the products transported areprohibited neither in origin country, neither in destination country. It is under my responsabili
        .form-block
          .left
            i.icons-timing
          .right.about
            h3 About the timing
            .form-datepicker
              input.time.js-datetime.required(type='text', placeholder='Parcel can be picked up starring', name='pickupDate')
              .form-datepicker-body.js-datetime-body.hide
                h4 Your check in Date
                strong.time TIME:
                strong.at at
                input.time_at(type='text', placeholder=' 14:00 ', name='pickupTime1')
                strong.to to
                input.time_to(type='text', placeholder=' 17:00 ', name='pickupTime2')
                em *Period must be have more than two hours.
            .form-datepicker
              input.time.js-datetime.time-right.required(type='text', placeholder='Parcel should arrived before', name='arriveDate')
              .form-datepicker-body.calendar-right.js-datetime-body.hide
                h4 Your check in Date
                strong.time TIME:
                strong.at at
                input.time_at(type='text', placeholder=' 15:00 ', name='arriveTime1')
                strong.to to
                input.time_to(type='text', placeholder=' 18:00 ', name='arriveTime2')
                em *Period must be have more than two hours.
            input#timing(type='checkbox', name='userAgreementTimes')
            label(for='timing') I am aware that the time frame influences TUber prices.
        .clear
        .form-block
          //.left
            i.icons-insurrance
          //.right.insurrance
            h3 About insurrance
            input.required(type='text', placeholder='Packet is insured until the value XXX€', name='insurance')
          button.orange_button Send!
        .clear

block script
  script(src="vendor/jquery/jquery.easy-autocomplete.min.js")
  script(type='text/javascript').
    var options = {
      url: "/countries_es.json",
      getValue: "name",
      list: { 
        match: {
          enabled: true
        }
      },
      theme: "square"
    };
    $("#fromCountry").easyAutocomplete(options);
    $("#toCountry").easyAutocomplete(options);

    $('.js-validate').submit(function() {
      $('#fromZip').removeClass('error');
      $('#fromCity').removeClass('error');
      $('#fromCountry').removeClass('error');
      $('#toZip').removeClass('error');
      $('#toCity').removeClass('error');
      $('#toCountry').removeClass('error');

      regdata = $(this).serialize();
      $.ajax({
        type: 'POST',
        url: this.action,
        data: regdata,
        success: function(data) {
          console.log('Result', data);
          location.href = '/price/'+data.parcel;
        },
        error: function(err) {
          console.log("Error", err);
          if(err.responseText == 'From address error') {
            $('#fromZip').addClass('error');
            $('#fromCity').addClass('error');
            $('#fromCountry').addClass('error');
          } else if(err.responseText == 'To address error') {
            $('#toZip').addClass('error');
            $('#toCity').addClass('error');
            $('#toCountry').addClass('error');
          }
        }});
      return false;
    });
  